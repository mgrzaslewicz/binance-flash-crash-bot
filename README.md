# parameters
- desiredSpread% = set desired spread (eg 0.2%)
- desiredDepth = set desired depth (eg 1000 USD)

# algorithm
- avgKrakenSellPrice = calculate average sell price on kraken for desiredDepth (1000 USD)
- create limit buy order on binance
- price = avgKrakenBuyPrice (you need buy orders when selling) - desiredSpread%
- as soon as limit buy order is filled sell on kraken
  sell on kraken with market order, price = avgKrakenBuyPrice
 
# TODO
- fix growing number of orders in order book
``
  2021-02-15 18:47:35.236  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=BINANCE, currencyPair=BTC/USDT)] Last 100 buy orders count (newest first): [12748, 12748, 12748, 12748, 12748, 12748, 12748, 12748, 12748, 12748, 12748, 12748, 12748, 12748, 12748, 12748, 12748, 12748, 12572, 12240, 11704, 11263, 10548, 10095, 9179, 9206, 8495, 8334, 8612, 7965, 6845, 4694, 5599, 4746, 5341, 4662, 4092, 4125, 3558, 1765]
  2021-02-15 18:47:35.236  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=BINANCE, currencyPair=BTC/USDT)] Last 100 sell orders count (newest first): [12683, 12683, 12683, 12683, 12683, 12683, 12683, 12683, 12683, 12683, 12683, 12683, 12683, 12683, 12683, 12683, 12683, 12683, 12655, 12596, 12727, 12715, 13242, 13077, 13626, 12977, 13093, 12651, 11799, 11545, 11680, 9521, 7404, 5875, 4259, 4486, 3864, 2678, 1687, 1530]
  2021-02-15 18:47:35.236  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=KRAKEN, currencyPair=ETH/USD)] Last 100 buy orders count (newest first): [16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16704, 16703, 16703, 16678, 16580, 16579, 16579, 16478, 16405, 16376, 15673, 10266, 9409, 4384, 3643, 3609, 3318, 1801, 1486, 1235]
  2021-02-15 18:47:35.236  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=KRAKEN, currencyPair=ETH/USD)] Last 100 sell orders count (newest first): [841, 841, 841, 841, 841, 841, 841, 841, 841, 841, 841, 841, 841, 841, 841, 841, 841, 841, 841, 814, 902, 951, 951, 983, 1154, 1097, 1186, 1113, 1048, 977, 946, 906, 721, 495, 383, 348, 294, 220, 184, 150]
  2021-02-15 18:47:35.236  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=BINANCE, currencyPair=XRP/USDT)] Last 100 buy orders count (newest first): [4857, 4857, 4857, 4857, 4857, 4857, 4857, 4857, 4857, 4857, 4857, 4857, 4857, 4857, 4857, 4857, 4857, 4857, 4812, 4476, 4383, 4144, 3834, 3632, 3280, 3219, 3021, 2839, 3096, 3033, 2297, 1849, 2316, 2500, 2809, 2759, 2405, 2387, 2326, 2280]
  2021-02-15 18:47:35.236  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=BINANCE, currencyPair=XRP/USDT)] Last 100 sell orders count (newest first): [4917, 4917, 4917, 4917, 4917, 4917, 4917, 4917, 4917, 4917, 4917, 4917, 4917, 4917, 4917, 4917, 4917, 4917, 4942, 4838, 4815, 4793, 5001, 4924, 5182, 5109, 5199, 5168, 4773, 4591, 4611, 4064, 3394, 2916, 2368, 2244, 2303, 1951, 1612, 1084]
  2021-02-15 18:47:35.237  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=KRAKEN, currencyPair=LTC/USD)] Last 100 buy orders count (newest first): [3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3613, 3599, 3599, 3599, 3596, 3568, 3555, 3539, 3509, 2303, 2022, 1235, 1175, 1035, 908, 657, 645, 501]
  2021-02-15 18:47:35.237  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=KRAKEN, currencyPair=LTC/USD)] Last 100 sell orders count (newest first): [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 260, 254, 260, 262, 270, 275, 304, 298, 297, 244, 262, 260, 230, 223, 204, 174, 178, 164, 162, 127, 122, 135]
  2021-02-15 18:47:35.237  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=KRAKEN, currencyPair=XRP/USD)] Last 100 buy orders count (newest first): [11591, 11591, 11591, 11591, 11591, 11591, 11591, 11591, 11591, 11591, 11591, 11591, 11591, 11591, 11591, 11591, 11591, 11591, 11590, 11579, 11556, 11522, 11416, 11367, 11325, 11264, 11206, 11112, 11008, 10860, 10283, 6672, 5804, 4262, 3782, 3712, 3546, 2706, 2191, 1863]
  2021-02-15 18:47:35.237  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=KRAKEN, currencyPair=XRP/USD)] Last 100 sell orders count (newest first): [654, 654, 654, 654, 654, 654, 654, 654, 654, 654, 654, 654, 654, 654, 654, 654, 654, 654, 659, 643, 665, 662, 652, 678, 631, 601, 564, 460, 436, 418, 394, 355, 314, 275, 262, 259, 237, 206, 181, 154]
  2021-02-15 18:47:35.237  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=KRAKEN, currencyPair=BTC/USD)] Last 100 buy orders count (newest first): [31606, 31606, 31606, 31606, 31606, 31606, 31606, 31606, 31606, 31606, 31606, 31606, 31606, 31606, 31606, 31606, 31606, 31606, 31579, 31012, 29966, 29582, 29502, 29502, 29500, 29480, 29480, 29213, 28875, 28591, 26055, 16298, 14667, 9848, 7922, 7894, 7291, 5577, 5211, 2630]
  2021-02-15 18:47:35.237  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=KRAKEN, currencyPair=BTC/USD)] Last 100 sell orders count (newest first): [1976, 1976, 1976, 1976, 1976, 1976, 1976, 1976, 1976, 1976, 1976, 1976, 1976, 1976, 1976, 1976, 1976, 1976, 1988, 2010, 2246, 2283, 2549, 2633, 2678, 2569, 2679, 2440, 2209, 1998, 1895, 1643, 1240, 904, 630, 925, 596, 398, 210, 176]
  2021-02-15 18:47:35.237  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=BINANCE, currencyPair=ETH/USDT)] Last 100 buy orders count (newest first): [8929, 8929, 8929, 8929, 8929, 8929, 8929, 8929, 8929, 8929, 8929, 8929, 8929, 8929, 8929, 8929, 8929, 8929, 8843, 8420, 8067, 7689, 7318, 7110, 6284, 6201, 5646, 5349, 5512, 5384, 4554, 3540, 3819, 3638, 3983, 3681, 3135, 3179, 2984, 2241]
  2021-02-15 18:47:35.237  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=BINANCE, currencyPair=ETH/USDT)] Last 100 sell orders count (newest first): [8334, 8334, 8334, 8334, 8334, 8334, 8334, 8334, 8334, 8334, 8334, 8334, 8334, 8334, 8334, 8334, 8334, 8334, 8360, 7963, 8375, 8576, 8651, 8566, 9359, 8844, 9297, 9127, 8775, 8286, 8351, 7524, 6411, 4292, 3506, 3455, 3155, 2316, 1852, 1419]
  2021-02-15 18:47:35.252  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=BINANCE, currencyPair=LTC/USDT)] Last 100 buy orders count (newest first): [3110, 3110, 3110, 3110, 3110, 3110, 3110, 3110, 3110, 3110, 3110, 3110, 3110, 3110, 3110, 3110, 3110, 3110, 3081, 3058, 2933, 2798, 2597, 2482, 2189, 2234, 2101, 1985, 2065, 1915, 1849, 1415, 1754, 1691, 1844, 1674, 1662, 1718, 1668, 1269]
  2021-02-15 18:47:35.252  INFO   --- [pool-2-thread-1] a.a.b.e.o.l.OrderBookSnapshotLogger      : [ExchangeNameWithCurrencyPair(exchangeName=BINANCE, currencyPair=LTC/USDT)] Last 100 sell orders count (newest first): [3334, 3334, 3334, 3334, 3334, 3334, 3334, 3334, 3334, 3334, 3334, 3334, 3334, 3334, 3334, 3334, 3334, 3334, 3352, 3297, 3356, 3267, 3426, 3435, 3713, 3618, 3632, 3574, 3423, 3370, 3186, 3019, 2526, 2201, 1949, 1847, 1652, 1313, 1133, 1156]
``  
- fix: ``OrderBookSpreadCalculatorAndNotifier : BINANCE-KRAKEN-BTC/USD had the same average sell price for depth 10000 which is unlikely to happen``
- fix: ``OrderBookSpreadCalculatorAndNotifier - Could not calculate spread for BTC/USD
    java.lang.ArithmeticException: BigInteger divide by zero
    at java.base/java.math.MutableBigInteger.divide(MutableBigInteger.java:1440)``
- find out what's wrong with calculating spread between total depths (it always grows other time, when restarted values are smaller)
- measure how often limit order will be repositioned for various depths (1k, 2k, 5k, 10k USD) and compare that with API limits
- check exchange trades for measuring spreads instead of order book
- measure how long it takes to reposition limit order